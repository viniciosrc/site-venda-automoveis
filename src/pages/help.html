<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Velocità - Ajuda</title>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons|Material+Icons+Outlined" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="../css/style_help.css">
</head>
<body>

    <header class="main-header">
        <div class="header-content">
            
            <a href="#" class="logo-container">
                <img class="logo-home-velocita" src="../assets/image/logovelocita-home.png" alt="logoHome velocita">
            </a>

            <nav class="main-nav">
                <a href="cadastro_veiculos.html" class="nav-link">Vender</a>
                <a href="tabela_Fipe.html" class="nav-link">Tabela Fipe</a>
                <a href="#" class="nav-link">Ajuda</a>
            </nav>

            <div class="access-icons">
                <div class="access-link-wrapper">
                    <a href="login_card.html" class="access-link">
                        <i class="fas fa-user-circle access-icon"></i> 
                        <span class="access-text">Entrar & Cadastrar</span>
                    </a>
                </div>
                
                <a href="#" class="favorite-link">
                    <i class="fas fa-heart favorite-icon"></i> 
                </a>
            </div>
        </div>
    </header>

    <main>
        <h1>Ajuda</h1>
        <hr>

        <div class="help-options-container">
            
            <button class="option-card" onclick="selectOption(this, 'conta')">
                <div class="info-badge">
                    i
                    <span class="tooltip-text">Problemas com login, senha, cadastro ou exclusão de dados.</span>
                </div>
                <div class="velocita-pill">
                    <span class="material-icons-outlined">account_circle</span> Velocità
                </div>
                <div class="card-title">Tenho dúvidas sobre a conta.</div>
            </button>

            <button class="option-card" onclick="selectOption(this, 'produtos')">
                 <div class="info-badge">
                    i
                    <span class="tooltip-text">Dúvidas sobre compras, vendas, taxas e documentação veicular.</span>
                 </div>
                <div class="product-icons">
                    <div class="icon-circle-orange">+</div>
                    <div class="icon-circle-orange">?</div>
                </div>
                <div class="card-title">Tenho dúvidas sobre os produtos.</div>
            </button>

            <button class="option-card" onclick="selectOption(this, 'outras')">
                 <div class="info-badge">
                    i
                    <span class="tooltip-text">Para assuntos gerais ou contato direto com o suporte.</span>
                 </div>
                 <div class="velocita-pill">
                    <span class="material-icons-outlined">account_circle</span> Velocità
                </div>
                <div class="card-title">Outras dúvidas.</div>
            </button>
        </div>

        <section id="specification-area">
            <div class="form-container">
                
                <div class="common-options-label" id="tags-label">Assuntos frequentes:</div>
                <div class="tags-container" id="tags-container">
                    </div>

                <p class="support-instruction">
                    Caso sua dúvida não esteja aqui, ou se achar melhor, mande uma mensagem para a equipe de suporte:
                </p>

                <textarea placeholder="Escreva aqui os detalhes..."></textarea>

                <button class="submit-btn" onclick="enviarSolicitacao()">ENVIAR</button>
            </div>
        </section>

    </main>



    <script>
        const opcoesPorCategoria = {
            'conta': ["Esqueci minha senha", "Alterar e-mail", "Excluir minha conta", "Histórico de atividades", "Problema no login"],
            'produtos': ["Acompanhar minha venda", "Como comprar", "Agendar visita", "Taxas e financiamento", "Documentação"],
            'outras': [] 
        };

        let isAnimating = false;

        function selectOption(clickedCard, categoria) {
            if (isAnimating || clickedCard.classList.contains('selected')) return;

            const specArea = document.getElementById('specification-area');
            const isAlreadyOpen = specArea.classList.contains('show');

            if (isAlreadyOpen) {
                isAnimating = true; 
                specArea.classList.remove('show');
                setTimeout(() => {
                    atualizarVisualCard(clickedCard);
                    atualizarTags(categoria);
                    specArea.classList.add('show');
                    isAnimating = false; 
                }, 500); 
            } else {
                atualizarVisualCard(clickedCard);
                atualizarTags(categoria);
                specArea.classList.add('show');
                setTimeout(() => {
                    specArea.scrollIntoView({ behavior: 'smooth', block: 'center' });
                }, 100);
            }
        }

        function atualizarVisualCard(cardParaSelecionar) {
            const allCards = document.querySelectorAll('.option-card');
            allCards.forEach(card => card.classList.remove('selected'));
            cardParaSelecionar.classList.add('selected');
        }

        function atualizarTags(categoria) {
            const container = document.getElementById('tags-container');
            const label = document.getElementById('tags-label');
            container.innerHTML = '';

            const novasTags = opcoesPorCategoria[categoria];

            if (!novasTags || novasTags.length === 0) {
                label.style.display = 'none';
                return;
            }

            label.style.display = 'block';
            novasTags.forEach(texto => {
                const btn = document.createElement('button');
                btn.className = 'tag-option';
                btn.innerText = texto;
                btn.onclick = function() { toggleTag(this) };
                container.appendChild(btn);
            });
        }

        function toggleTag(tagElement) {
            tagElement.classList.toggle('active');
        }

        function enviarSolicitacao() {
            const textarea = document.querySelector('textarea');
            // Simulação de envio
            alert("Sua solicitação foi enviada com sucesso! Em breve entraremos em contato.");

            // Reset
            textarea.value = '';
            document.querySelectorAll('.tag-option.active').forEach(tag => tag.classList.remove('active'));
            document.getElementById('specification-area').classList.remove('show');
            document.querySelectorAll('.option-card.selected').forEach(card => card.classList.remove('selected'));
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }
    </script>
</body>
</html>